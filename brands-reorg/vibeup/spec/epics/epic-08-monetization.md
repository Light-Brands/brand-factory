# Epic 08: Monetization - Memberships & Revenue

**Epic ID**: EPIC-08-MONETIZATION  
**Priority**: P1 (Revenue generation)  
**Timeline**: 2 weeks  
**Dependencies**: Epic 0, 1, 2, 3, 4, 6, 7

---

## Vision & Objectives

Prepare free onboarding into valuable high-conversion premium memberships. **Mira frames upgrades as growth accelerators and impact opportunities, never as transactions**. She educates on benefits, personalizes value propositions, celebrates regenerative choices, and makes the $4/month premium tier feel like aligned investment in self and planet, not a purchase.

### Membership Tiers

#### **Human Memberships**

**Community (Free) - "Join the Community"**:
- Join the mindful community of 1000s
- Access all pages, services, & resources
- Search, filter, message, & connect with others
- Create 1 community
- Limited practice tracking (1-3 practices)
- Basic discovery features

**Regenerative (Premium - $4/month) - "Grow the Movement"**:
- **Everything from Community tier, PLUS:**
- **üå≥ We plant a tree each month because of you** (via OneTreePlanted.org)
- **Unlock 100s of Member Perks**: Organic Meals, Memberships, Apparel, Apps & More
- Create Multiple Community Groups (unlimited)
- Track 4 or More Practices simultaneously
- Enable Daily Practice Scheduled Reminders
- Unlock the VIBEUP Purpose Exercise and Daily Gratitude features
- Receive Daily Affirmations Supporting Your Growth
- Receive Daily Recommended Connections
- Access Regenerative Member Events (coming soon)
- **Unlock all Dating Filters & Features:**
  - Unlimited Dating Intention Search (free tier has limits)
  - Suggested Messages: AI-recommended dating messages
  - 3 Recommended Daily Connections: top aligned dating matches
  - See who has viewed your profile

#### **Business Memberships**

**Community (Free) - "Feature Your Business"**:
- Full custom profile to feature your business
- Gain exposure to 10,000+ active subscribers
- List Your Perks, Services, Events, Products, and more
- Start & Grow Your Community
- Promote Your Website, Services, Products, Social channels
- Limited messaging (daily caps)
- Single moderator (owner only)

**Regenerative (Premium - $4/month) - "Grow the Movement"**:
- **Everything from Business Community tier, PLUS:**
- **üå≥ Plant a tree with our partner OneTreePlanted.org** (monthly)
- Add a Moderator to Help Administer Your Profile
- Create Multiple Communities (unlimited)
- Receive Member Growth Recommendations
- Message Unlimited Members Daily (no caps)
- Receive Additional Perk Exposure in discovery
- Be Featured in VIBEUP Promotions and News
- Gain Access to Business+ Member Events (coming soon)
- Priority support and verification processing

### Mira's Role in Values-First Monetization

**Never Pushy, Always Values-Aligned**: Mira frames premium membership as aligned investment in personal growth and planetary impact, not as a transaction. She respects autonomy, timing, and authentic choice-making.

**Upgrade Education (Not Sales)**:
- "Regenerative membership plants 1 tree monthly‚Äî6 trees in your trial, 144 trees over a year. Your wellness journey becomes climate action."
- "Premium unlocks 200+ business perks from aligned practitioners. Many members save more than membership cost monthly."
- "As a Regenerative member, you can create unlimited communities and track 4+ practices simultaneously. Your growth journey expands."
- "Daily reminders help with practice consistency. Members with reminders show 2.5x higher streak continuation."

**Personalized Value Framing**:
- "You've logged 47 practices. Regenerative membership adds Purpose Exercise and Daily Gratitude‚Äîpractices specifically designed for your Reflect intention."
- "You're interested in dating features. Those unlock with Regenerative membership, including advanced chemistry matching."
- "You bookmarked 5 businesses. As a Regenerative member, you'd have access to exclusive perks from all of them."
- "Your friend Sarah is Regenerative. You'd unlock more connection features and recommended connections daily."

**Crypto Payment Options (Epic 1A Integration)**:
- "Pay your Regenerative membership with USDC and save on credit card fees. Your subscription: $4/month in USDC."
- "You have 500 VIBES‚Äîenough to cover 3 months of membership! Want to pay with tokens you've earned?"

**KARMA-Enhanced Benefits (Epic 1B Integration)**:
KARMA level directly enhances membership value and earning potential:

**VIBES Earning Multiplier by KARMA Level**:
| KARMA Level | Name | VIBES Multiplier |
|-------------|------|------------------|
| 1-3 | Seedling-Sapling | 1.0x |
| 4 | Growing | 1.1x |
| 5 | Flourishing | 1.25x |
| 6 | Thriving | 1.5x |
| 7 | Guardian | 1.75x |
| 8+ | Steward+ | 2.0x |

**Membership KARMA Integration**:
- Every membership payment plants a tree: +50 KARMA/month
- KARMA prominently displayed as membership benefit
- "Your Regenerative membership has planted 47 trees and earned 2,350 KARMA"
- Higher KARMA level = better earning rate showcased in membership benefits

**KARMA-Gated Perks**:
- Level 4+: Priority Discovery matching
- Level 5+: Community spotlight eligibility  
- Level 6+: Access to exclusive events
- Level 7+: Voting weight boost in governance
- Level 8+: Mentor status and exclusive badge

**Karma-Based Business Discounts**:
- High-KARMA users get special offers from businesses
- "Steward members save 15% at partner businesses"
- Businesses can offer KARMA-level-based promotions

**Mira Monetization KARMA**:
- "Your Regenerative membership planted another tree this month! +50 KARMA. Total: 47 trees üå≥"
- "At Flourishing level, you earn 1.25x VIBES on every practice. That's 37% more than base!"
- "Reach Guardian (Level 7) to unlock 1.75x VIBES earning. You need 2,153 more KARMA."
- "Your KARMA level unlocked an exclusive 15% discount at Sound Haven. Conscious commerce pays off!"
- "Stake 1,000 VIBES to unlock premium features without monthly payments. Your tokens earn rewards while staked."
- "Instant affiliate payouts! When friends join, you receive USDC directly to your wallet‚Äîno waiting for checks."
- "Using VIBES for membership? You'll earn 10% back in additional tokens as a loyalty reward."

**Impact-First Messaging**:
- "In 6 months, you've practiced 89 times. Imagine if each practice planted a tree‚Äîthat's a forest of personal growth and planetary healing."
- "VIBEUP's regenerative model: Your membership directly funds reforestation. Wellness and ecology intertwined."
- "47,000 trees planted by our community this year. Your upgrade adds 12 more annually. Collective impact."

**Timing Intelligence (When to Suggest)**:
- Trial ending: "Your 7-day trial ends tomorrow. Want to continue your growth journey and start planting trees?"
- After milestone: "21-day practice streak! You're committed to showing up. Regenerative membership amplifies that commitment."
- When limited: "You've created 1 community (free tier limit). Upgrade to create communities for each of your interests."
- Perk encounter: "You found a business offering 20% member perks. Upgrade to unlock this and 200+ other perks."

**Trial Experience**:
- "Welcome to your 7-day Regenerative trial! Experience everything premium: perks, advanced practices, unlimited communities."
- "Day 3 of your trial. You've used 4 member perks already‚Äîthat's $40 value from a $4 membership!"
- "Trial ending in 2 days. Want to continue planting trees and accessing perks? Upgrade anytime."
- "Your trial included full access. Keep the momentum going‚Äîupgrade to Regenerative?"

**Objection Handling (Non-Defensive)**:
- "Not ready to upgrade? That's totally okay. Community tier is powerful‚Äîyou can always upgrade later."
- "Want more time to explore? I understand. Take your time discovering what resonates."
- "Budget tight? I get it. Many members upgrade after experiencing more of the platform. No pressure."
- "Curious about value? Try tracking business perk savings. Many members break even on first perk redemption."

### Affiliate Program Deep Dive

**Program Structure**:
- **Commission**: 10% membership revenue for life from referred users
- **Extended Trials**: Affiliates can offer 30+ days free (vs public 7 days)
- **Better Offers**: Affiliates get exclusive promotional power beyond public offers
- **Revenue Threshold**: Ongoing referral revenue kicks in once 100+ people have been referred
  - Before 100 referrals: Affiliates still earn commission, but tracked separately
  - After 100 referrals: Full commission payouts unlocked consistently
- **Flexible Terms**: Platform can change terms at any point (disclosed in affiliate agreement)

**Affiliate Application Process**:
- **Ambassador Application**: "Do you want to become a VIBEUP Ambassador? Apply now to get affiliate bonuses, referral perks, first access, exclusive events, etc."
- **Desirability Framing**: Make affiliates feel special‚Äîbeing an affiliate is a privilege, not just a feature
- **Gears Up Promotion**: Application process primes affiliates to actively promote

**Mira's Affiliate Program Introduction**:
- "You love VIBEUP. Want to share it? Your referral code gives friends 30 days free and plants 10 trees when they convert."
- "Affiliates earn 10% lifetime commission on referrals. Sharing aligned platform creates passive regenerative income."
- "Your referral link: vibeup.io/join/yourcode. Share with people who'd resonate with mindful wellness community."
- "3 friends joined using your code! That's 30 trees planted and $1.20 monthly commission. Sharing creates impact."
- "Once you refer 100+ people, your recurring commission payments unlock fully‚Äîbuild passive income while spreading conscious wellness."

**Strategic Placement (Prominent Across Platform)**:

1. **End of Onboarding** (High-Intent Moment):
   - **CTA**: "VIBEUP is better together‚ÄîShare with Friends: 10% for Life"
   - **Share Options**:
     - Share on Instagram/Facebook (deep links with pre-filled captions)
     - Share to phone contacts via API access
     - Share via email (auto-compose new email with template)
   - **Timing**: Right after user completes onboarding and feels initial value

2. **All Sharing CTA Buttons** (Throughout Platform):
   - Every "Share" button across platform promotes affiliate program
   - When users click share on profiles, practices, communities, businesses:
     - Modal appears: "Share your affiliate link to earn 10% for life!"
     - One-click sharing with affiliate code automatically attached

3. **Profile Pages** (Own Profile):
   - Affiliate section: "Your Affiliate Dashboard"
   - Stats: Referrals, conversions, earnings, next milestone
   - Share buttons with affiliate link

4. **Business Profiles**:
   - Businesses can become affiliates
   - Promote VIBEUP to their customers and community members
   - Earn commission while growing platform aligned with their values

5. **Community Profiles**:
   - Community moderators/owners can promote affiliate links
   - Invite community members to join VIBEUP
   - Commission earned funds community activities

6. **Settings Page**:
   - Dedicated "Affiliate Program" section
   - Full stats, earnings history, payout settings
   - Promotional materials library (graphics, copy, videos)

7. **Notifications**:
   - "Your friend [Name] just joined using your affiliate code! üéâ"
   - "You've reached 25 referrals‚Äîhalfway to unlocking recurring payouts!"
   - "Your affiliate earnings this month: $37.50"

**Affiliate Success Metrics**:
- **Goal**: 10% of premium members activate affiliate codes
- **Target**: 5+ referrals per affiliate within first month
- **Milestone**: 1% of affiliates reach 100+ referrals (full commission unlock)
- **Quality**: 15%+ conversion rate for affiliate referrals (vs 3% organic)

**Perk Value Demonstration**:
- "This yoga studio perk saves you $30/month. Your membership is $4. That's 7.5x return on investment."
- "You've redeemed 5 perks worth $120 total. Your membership investment: $24 (6 months). 5x value unlocked."
- "200+ businesses offer member perks. Even using 2-3 monthly exceeds membership cost. Value compounds."

**Regenerative Identity Framing**:
- "Regenerative members are people who invest in themselves and the planet simultaneously. That's powerful alignment."
- "Your membership badge signals values: 'I care about personal growth and environmental healing.'"
- "Being Regenerative isn't just a tier‚Äîit's an identity. You're part of a community planting forests while elevating consciousness."

**Cancelation Support (When Requested)**:
- "I'm sorry to hear you're leaving. Can I ask what would have made Regenerative membership more valuable?"
- "Canceling doesn't mean goodbye. Your Community tier access continues‚Äîyou're still part of VIBEUP."
- "You planted 8 trees during your membership. That impact lives on. Thank you for investing in regeneration."
- "Want to pause instead of cancel? We can reactivate whenever you're ready to resume your journey."

**Never Uses These Phrases**:
- ‚ùå "Limited time offer!"
- ‚ùå "Don't miss out!"
- ‚ùå "Upgrade now before losing access!"
- ‚ùå "Only $4!" (minimizing price feels inauthentic)
- ‚ùå "Buy premium membership"

**Always Uses These Frames**:
- ‚úÖ "When you're ready to expand your journey..."
- ‚úÖ "Regenerative membership amplifies your growth..."
- ‚úÖ "Your investment plants trees and unlocks value..."
- ‚úÖ "Many members find that perks pay for membership..."
- ‚úÖ "Upgrading means joining people committed to regeneration..."

**Conversion Psychology (Ethical)**:
- Social proof: "12 of your connections are Regenerative members."
- Milestone timing: Suggests upgrade after achievements, not failures
- Value demonstration: Shows actual savings and impact, not hypothetical
- Identity alignment: Appeals to values ("regenerative"), not scarcity
- Autonomy respect: Always "when you're ready," never pressure

---

## Sponsorships

**Vision**: Enable conscious brands to reach aligned audiences through values-based partnerships, not intrusive advertising.

### Distribution Channels
- **Platform Ads**: Native, values-aligned ad placements in discovery feed
- **Push Notifications**: Sponsored notifications (limited, permission-based)
- **Email Blasts**: Monthly sponsor features to opted-in subscribers
- **Social Channels**: Sponsor features in VIBEUP social media content
- **Digital Events**: Sponsored virtual gatherings and workshops

### Sponsorship Tiers

**Presenting Sponsor** (Main Brand):
- Primary brand association with VIBEUP platform
- Logo placement on all platform touchpoints
- Featured in all marketing communications
- Exclusive category sponsorship
- Custom landing pages and branded experiences
- Pricing: $10,000+/month

**Pillar Sponsor** (Per Category):
- Category-specific sponsorship (e.g., "Meditation Partner", "Wellness Food Partner")
- Logo placement in relevant category pages
- Featured in category-specific communications
- Co-branded content opportunities
- Event sponsorship rights
- Pricing: $3,000-5,000/month

**Community Sponsor**:
- Sponsor specific communities or practice journeys
- Brand integration into community experiences
- Access to community insights and feedback
- Co-creation opportunities
- Pricing: $1,000-2,000/month

### Sponsorship Guidelines (Values-First)
- All sponsors must align with VIBEUP values (wellness, consciousness, sustainability)
- No intrusive advertising or aggressive marketing tactics
- Transparency: All sponsored content clearly labeled
- User control: Ability to opt-out of sponsor communications
- Quality over quantity: Limited sponsor slots to maintain platform integrity

---

## Feature Limits & Paywall Triggers

### Human Membership Feature Gates

**Phase 1 (Current) - What Exists Now**:

**Communities**:
- **Free**: Create 1 community
  - **Paywall**: If user tries to create 2nd community ‚Üí "Upgrade to Regenerative" popup
- **Paid**: Create multiple communities (unlimited)

**Discovery - Recommended Connections**:
- **Free**: 1 Recommended Connection per day (based on aligned attributes)
  - Show blurred list of additional recommendations below with message: "Upgrade to Regenerative membership to see more Recommended Connections"
  - **Optional**: Limit searches per day (10-20 searches)
    - Paywall: If user exceeds limit ‚Üí "Upgrade to Regenerative" popup
- **Paid**: 10 Recommended Connections per day
  - Unlimited searches

**Practices**:
- **Free**: Activate/Create up to 3 practices
  - **Paywall Triggers**:
    - Try to create 4th practice ‚Üí "Upgrade to Create More Practices" popup
    - Try to set "Daily Reminders" ‚Üí "Upgrade to Regenerative" popup
- **Paid**: Accountability components:
  - Activate 4+ practices (unlimited)
  - Schedule daily reminders & notifications
  - During free trial: Purpose Exercise, Daily Gratitude, Affirmations remain at top
  - After trial ends (if not upgraded): These 3 move to bottom of practice list

**Perks**:
- **Free**: Unlock 1 Perk per month
  - When clicking to unlock: "Are you sure? Community Members can unlock 1 Perk per month. Upgrade to Regenerative for unlimited."
  - **Paywall**: Try to click 2nd perk ‚Üí "Upgrade" page
  - **Notifications**: Weekly perk updates + new perk alerts to entice upgrades
- **Paid**: Access all perks anytime (unlimited)

**Phase 2 (Future) - What Comes Next**:

**Chemistry Section Paywall**:
- **Free**:
  - See high-level personality type header (e.g., "Generator" for Human Design)
  - **Blurred** text box with AI-generated description
  - **Blurred** list of 3 Recommended Connections based on Chemistry alignment
- **Paid**:
  - **Unblurred** AI-generated deeper insights for Astrology and each Personality type
  - **Unblurred** 3 Recommended Connections daily based on Chemistry
  - "See Recommended Connections" unique Chemistry recommendations

**Search & Filters**:
- **Free**: Limited filters (basic set)
- **Paid**: Access all advanced filters

**The Guide (AI)**:
- **Free**: Limited usage (basic GPT queries)
- **Paid**:
  - Unlimited usage
  - Deeper recommendations
  - Additional Agents: Teachers (Meditation, Yoga, Fitness, Nutrition, Relationships) + Guides (Philosophers, Women's Circle, Entrepreneurs)

**Dating Features** (Phase 2):
- **Free**: Basic discovery, limited matches
- **Paid**:
  - Access all search-filters (lifestyle, chemistry, interests)
  - Limited messages per day
  - Receive 3 Recommended Connections per day
  - See who views your Dating Profile

### Business Membership Feature Gates

**Phase 1**:
- **Free**: List services, events, communities (basic exposure)
- **Paid**:
  - Limit number of messages business can send daily ‚Üí removed for paid
  - Admin management toolset (events, services, multiple community management, booking)
  - Featured placement and promotion

---

## Custom Promo Codes

**Purpose**: Allow VIBEUP to create custom promotional codes for strategic partnerships, friends & family, testing, and business development.

**Promo Code Capabilities**:
1. **Discount Percentage**: Set 1-100% off
2. **Usage Limits**: Set number of uses (1 to unlimited)
3. **Expiration Date**: Set code expiration
4. **Trial Extensions**: Offer extended trials (e.g., 30 days vs standard 7)

**Use Cases**:
- Friends & family discounts
- Business partner incentives
- Influencer partnerships
- Beta tester rewards
- Event attendee promotions
- Strategic alliance offers

**Admin Interface**:
- Create/edit/deactivate promo codes
- Track usage statistics
- View redemption history
- Set per-user or global limits

---

## Growth Strategies

### Product-Led Growth Tactics

**Free Trial Optimization**:
- Give Premium FREE Trial for 7-30 Days (standard: 7 days, affiliate: 30 days)
- During trial, popups display every time users access a premium feature
- Active reminders/awareness of the added value they're getting
- Trial countdown notifications (3 days remaining, 1 day remaining, last day)

**Prominent Premium Feature Display**:
- Show "Regenerative Membership" enhancements exactly where users would benefit
- **In Search & Filter**: "Upgrade to unlock advanced filters"
- **On Discover Page**: "Regenerative members see 3x more compatible matches"
- **In Practices**: "Track 4+ practices with Regenerative membership"
- **In Guide/Mira**: "Unlock Purpose Exercise and Daily Gratitude practices"
- Never block access‚Äîalways show value proposition contextually

**Tree Planting Visibility**:
- Prominently display "You've Planted a Tree" message after billing
- Impact page shows total trees planted by Regenerative Members
- Community impact visualization: "47,000 trees planted this year"
- Personal impact timeline: "You've planted 8 trees‚Äîthat's a small grove!"
- Reference: [Prototype Growth page](https://www.wevibeup.com/grow)

### Notification Strategies

**Engagement Notifications** (Compel Active Usage):
- New connection requests and acceptances
- Message notifications (real-time and digest)
- Daily practice reminders (customizable time)
- Connected human, community, and business alerts
- Milestone celebrations (streaks, achievements)
- Community posts and events

**Conversion Notifications**:
- At end of Free Trial: "Your trial ends tomorrow‚Äîcontinue planting trees?"
- Feature limit encounters: "Upgrade to track more practices"
- Perk opportunities: "This business offers member perks‚Äîunlock now?"
- Milestone moments: "21-day streak! Amplify your commitment with Regenerative"

### Feedback Mechanisms

**Contextual Micro-Surveys** (Throughout Platform):
- **After Connections**: "Have you Connected with an Aligned Connection?" ‚Üí Yes/No ‚Üí "How can we improve?" ‚Üí Feedback form
- **After Practices**: "Are Practices adding value to your week?" ‚Üí Scale 1-5 ‚Üí "What would make it better?"
- **After Community Interaction**: "Have you Connected with a Community?" ‚Üí Yes/No ‚Üí "What communities would you like to see?"
- **General**: Popup every 2-4 weeks: "How's your VIBEUP experience?" with quick rating + optional feedback

### WAU (Weekly Active User) Target
- **Goal**: 40% of members engage on platform weekly
- **Definition**: Log practice, message connection, post vibe, or attend event
- **Strategies**: 
  - Push notifications (practice reminders, connection updates)
  - Email digests (weekly highlights, new matches)
  - Streak accountability (don't break your practice streak)
  - Community engagement (events, discussions)

### Conversion Goals
- **Primary**: 3% or higher free members become premium
- **Optimized**: 10%+ for users with complete profiles + 1 practice logged
- **Trial**: 40%+ trial users convert to paid
- **Business**: 30%+ business signups convert to premium

---

## Success Metrics for Profiles

### Phase 1: Initial Test Users (0-500 users)
**Human Conversions**:
- **Target**: 3-10%+ of initial test users convert to premium $4/mo
- **Focus**: Learning what drives conversion in small cohort
- **Metrics**: 
  - Time to first premium consideration
  - Features used before conversion
  - Mira interaction impact on conversion

**Business Conversions**:
- **Target**: 30%+ initial test businesses convert to premium $4/mo
- **Rationale**: Businesses see clearer ROI from increased exposure
- **Metrics**:
  - Business profile completion rate
  - Services/perks listed
  - Community creation rate

### Phase 2: Public Launch (1,000+ users)
**Human Conversions**:
- **Target**: 3%+ of new users remain in premium after free trial
- **Long-term**: 5%+ steady-state conversion rate
- **Cohort retention**: 60%+ premium members are weekly active users

**Business Conversions**:
- **Target**: 10%+ of new businesses remain in premium
- **Expansion**: 50%+ of premium businesses invite team moderators

### Community-Driven Conversions
- **Target**: X% of Human's Community members convert to premium
- **Target**: X% of Business' Community members convert to premium
- **Hypothesis**: Active community participation drives premium value perception

### Premium Member Engagement
- **Target**: 60%+ of premium members are weekly active users
- **Benchmark**: 2x engagement rate vs free members
- **Metrics**:
  - Practice logging frequency
  - Perk redemption rates
  - Connection request rates
  - Community participation

### Premium Member Sharing
- **Target**: X% of Premium members share Y amount via affiliate
- **Hypothesis**: Satisfied premium members become advocates
- **Metrics**:
  - Affiliate code activation rate (10%+ of premium members)
  - Referrals per active affiliate (5+ within first month)

---

**Brand Identity**: This epic's implementation follows [brand identity guidelines](../brand/):
- **Visual**: Pricing pages follow [visual identity standards](../brand/01-visual-identity.md) - calm, clear presentation without aggressive CTAs
- **Copy**: All messaging uses [brand voice guidelines](../brand/03-brand-voice-messaging.md) - wholeness before monetization, tools for growth not upgrades
- **Mira**: AI interactions embody [Mira's personality](../brand/04-mira-personality-guide.md) framing premium as deepening journey
- **Integration**: See [brand-identity-integration.md](brand-identity-integration.md#epic-08-monetization) for Epic 08 specific requirements

**Key Brand Touchpoints**:
- Pricing CTAs inviting not aggressive ("Unlock full access to deepen your practice" not "Upgrade now!")
- Premium features framed as tools for growth ("Plant one tree monthly and access advanced features" not "Get more with Premium")
- Payment flows use calm, secure language
- Subscription management respectful and transparent
- Feature comparisons honest, highlighting value without manipulation

---

### Success Metrics (Mira-Enhanced)

**Conversion Metrics**:
- Free-to-premium conversion: 3%+ overall, 10%+ for engaged users
- Trial-to-paid conversion: 40%+ after 7-day trial
- Business conversion: 30%+ within first month
- **New**: Conversions 2x higher when Mira explains value vs generic upgrade prompts
- **New**: 90%+ users understand tree planting impact (Mira's education)
- **New**: Users who engage with Mira's perk explanations convert at 5x higher rate

**Affiliate Metrics**:
- Affiliate activations: 10%+ of premium members
- Referrals per affiliate: 5+ within first month
- **New**: Affiliate sharing 3x higher when Mira introduces program vs discovery alone
- Affiliate conversion rate: 15%+ of referred users convert (vs 3% baseline)

**Revenue Metrics**:
- Average revenue per user (ARPU): $2+ (50% conversion to $4/mo)
- Monthly Recurring Revenue (MRR): $50K+ by month 12
- Lifetime Value (LTV): $150+ for premium members
- Churn rate: <5% monthly for Regenerative members

**Engagement Impact**:
- Premium member WAU: 60%+ (vs 40% free members)
- **New**: Mira's upgrade timing intelligence reduces churn by 40% (suggests at right moments)
- Perk redemption rate: 30%+ of premium members use 1+ perk monthly
- Tree planting awareness: 95%+ premium members know about tree impact

---

## Account Management Requirements

### Membership Management Interface

**Self-Service Portal** (Settings ‚Üí Membership):
- View current tier and benefits
- See billing history and invoices
- View trees planted (for Regenerative members)
- Manage subscription settings
- Access affiliate dashboard

### Pause Membership Feature
- Allow members to pause subscription for 1-6 months
- Retain account data and history during pause
- No billing during pause period
- Automatic reactivation at end of pause period (with notification)
- Option to resume early
- **Use Cases**: Financial hardship, travel, life transitions
- **Mira's Role**: "Taking a break is okay. Your account and trees planted remain. Resume whenever you're ready."

### Credit Card Management
- **Update Payment Method**: Change credit card without disruption
- **Retry Failed Payments**: Automatic retry logic (3 attempts over 7 days)
- **Payment Failure Notifications**: Email + in-app notification before subscription cancellation
- **Grace Period**: 7 days to update payment method before tier downgrade
- **Mira's Support**: "Your payment didn't go through. Update your card to continue planting trees and accessing perks."

### Subscription Upgrades & Downgrades
- **Upgrade** (Free ‚Üí Regenerative): Immediate access, prorated billing
- **Downgrade** (Regenerative ‚Üí Free): Access continues until end of billing period, then tier change
- **Annual ‚Üí Monthly**: Switch at end of annual period
- **Monthly ‚Üí Annual**: Immediate switch with prorated credit

### Cancellation Flow
- **Self-Service Cancellation**: Cancel anytime from settings
- **Feedback Request**: Optional exit survey (Mira asks: "What would have made membership more valuable?")
- **Retention Offers**: Option to pause instead of cancel, discounted rates for annual commitment
- **Impact Summary**: "You planted 8 trees during your membership. Thank you for your impact."
- **Data Retention**: Account and data remain active on Community tier
- **Reactivation**: Easy one-click reactivation with same benefits

### Member Referrals (Extended Free Trials)
- **Standard Public Offer**: 7-day free trial
- **Affiliate Referral Offer**: 30+ days free trial (or custom duration set by admin)
- **Rationale**: Affiliates can offer better deals to incentivize sharing
- **Implementation**: Referral links automatically apply extended trial
- **Tracking**: All referrals tracked to affiliate for commission calculation
- **Mira's Introduction**: "Share VIBEUP with friends using your code. They get 30 days free (vs 7 days), and you earn 10% lifetime commission when they stay."

---

## Database Schema

```sql
CREATE TYPE membership_tier AS ENUM ('community', 'regenerative');

CREATE TABLE memberships (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID UNIQUE NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  
  -- Tier
  tier membership_tier DEFAULT 'community',
  previous_tier membership_tier, -- Track downgrades
  
  -- Subscription (Stripe)
  stripe_customer_id TEXT UNIQUE,
  stripe_subscription_id TEXT,
  stripe_subscription_status TEXT, -- 'active', 'past_due', 'canceled', 'paused'
  
  -- Free trial
  trial_ends_at TIMESTAMPTZ,
  trial_days INTEGER DEFAULT 7, -- Can be extended for affiliates (30+)
  is_on_trial BOOLEAN DEFAULT false,
  
  -- Billing
  current_period_start TIMESTAMPTZ,
  current_period_end TIMESTAMPTZ,
  cancel_at_period_end BOOLEAN DEFAULT false,
  
  -- Pause functionality
  is_paused BOOLEAN DEFAULT false,
  paused_at TIMESTAMPTZ,
  pause_duration_months INTEGER, -- 1-6 months
  resume_at TIMESTAMPTZ, -- Auto-calculated
  
  -- Promo codes
  promo_code TEXT,
  promo_discount_percent INTEGER, -- 0-100
  referred_by_affiliate_code_id UUID REFERENCES affiliate_codes(id),
  
  -- Trees planted (regenerative members)
  trees_planted_total INTEGER DEFAULT 0,
  last_tree_planted_at TIMESTAMPTZ,
  
  -- Cancellation tracking
  canceled_at TIMESTAMPTZ,
  cancellation_reason TEXT,
  cancellation_feedback TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE affiliate_codes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  
  code TEXT UNIQUE NOT NULL,
  discount_percent INTEGER DEFAULT 10, -- 10% lifetime commission
  trial_days INTEGER DEFAULT 30, -- Extended trial for affiliates (vs 7 days public)
  
  -- Tracking
  total_uses INTEGER DEFAULT 0,
  total_conversions INTEGER DEFAULT 0, -- Paid conversions
  total_revenue_cents INTEGER DEFAULT 0, -- 10% commission earned
  pending_payout_cents INTEGER DEFAULT 0, -- Unpaid commission
  
  -- Milestone tracking
  referral_milestone_100_reached BOOLEAN DEFAULT false,
  milestone_100_reached_at TIMESTAMPTZ,
  recurring_payouts_enabled BOOLEAN DEFAULT false, -- Unlocked after 100 referrals
  
  -- Application/Ambassador status
  is_ambassador BOOLEAN DEFAULT false,
  application_status TEXT DEFAULT 'pending', -- 'pending', 'approved', 'rejected'
  applied_at TIMESTAMPTZ,
  approved_at TIMESTAMPTZ,
  
  -- Terms agreement
  terms_version TEXT DEFAULT '1.0',
  terms_accepted_at TIMESTAMPTZ,
  
  is_active BOOLEAN DEFAULT true,
  deactivated_at TIMESTAMPTZ,
  deactivation_reason TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE affiliate_referrals (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  affiliate_code_id UUID NOT NULL REFERENCES affiliate_codes(id) ON DELETE CASCADE,
  referred_user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  
  -- Revenue tracking
  has_converted BOOLEAN DEFAULT false,
  converted_at TIMESTAMPTZ,
  commission_cents INTEGER DEFAULT 0, -- 10% of subscription
  commission_paid_at TIMESTAMPTZ,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(affiliate_code_id, referred_user_id)
);

CREATE TABLE promo_codes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  code TEXT UNIQUE NOT NULL,
  discount_percent INTEGER NOT NULL, -- 1-100% off
  trial_days_extension INTEGER DEFAULT 0, -- Extra days beyond standard 7
  
  -- Usage limits
  max_uses INTEGER, -- NULL = unlimited
  current_uses INTEGER DEFAULT 0,
  max_uses_per_user INTEGER DEFAULT 1,
  
  -- Dates
  expires_at TIMESTAMPTZ,
  
  -- Metadata
  description TEXT,
  created_by_admin_id UUID REFERENCES admin_users(id),
  
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE promo_code_redemptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  promo_code_id UUID NOT NULL REFERENCES promo_codes(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  
  discount_applied_cents INTEGER,
  trial_days_granted INTEGER,
  
  redeemed_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(promo_code_id, user_id) -- One redemption per user per code
);

ALTER TABLE memberships ENABLE ROW LEVEL SECURITY;

CREATE POLICY memberships_select_own ON memberships
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY memberships_update_own ON memberships
  FOR UPDATE USING (auth.uid() = user_id);
```

---

## Service Layer

```typescript
/**
 * MONETIZATION SERVICE
 * ====================
 */
import Stripe from 'stripe';

export class MonetizationService extends BaseDatabaseService {
  private stripe: Stripe;
  
  constructor(supabase) {
    super(supabase);
    this.stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {
      apiVersion: '2023-10-16'
    });
  }
  
  /**
   * Start free trial (7 days standard, 30+ days for affiliate referrals)
   */
  async startFreeTrial(
    userId: string, 
    trialDays: number = 7, 
    affiliateCodeId?: string
  ): Promise<void> {
    const trialEnd = new Date();
    trialEnd.setDate(trialEnd.getDate() + trialDays);
    
    await this.supabase
      .from('memberships')
      .upsert({
        user_id: userId,
        tier: 'regenerative',
        is_on_trial: true,
        trial_days: trialDays,
        trial_ends_at: trialEnd.toISOString(),
        referred_by_affiliate_code_id: affiliateCodeId
      }, { onConflict: 'user_id' });
  }
  
  /**
   * Pause membership for 1-6 months
   */
  async pauseMembership(
    userId: string, 
    durationMonths: number
  ): Promise<void> {
    if (durationMonths < 1 || durationMonths > 6) {
      throw new Error('Pause duration must be 1-6 months');
    }
    
    const now = new Date();
    const resumeDate = new Date(now);
    resumeDate.setMonth(resumeDate.getMonth() + durationMonths);
    
    // Pause Stripe subscription
    const { data: membership } = await this.supabase
      .from('memberships')
      .select('stripe_subscription_id')
      .eq('user_id', userId)
      .single();
    
    if (membership?.stripe_subscription_id) {
      await this.stripe.subscriptions.update(
        membership.stripe_subscription_id,
        { pause_collection: { behavior: 'void' } }
      );
    }
    
    // Update membership record
    await this.supabase
      .from('memberships')
      .update({
        is_paused: true,
        paused_at: now.toISOString(),
        pause_duration_months: durationMonths,
        resume_at: resumeDate.toISOString(),
        stripe_subscription_status: 'paused'
      })
      .eq('user_id', userId);
  }
  
  /**
   * Resume paused membership
   */
  async resumeMembership(userId: string): Promise<void> {
    const { data: membership } = await this.supabase
      .from('memberships')
      .select('stripe_subscription_id')
      .eq('user_id', userId)
      .single();
    
    if (membership?.stripe_subscription_id) {
      await this.stripe.subscriptions.update(
        membership.stripe_subscription_id,
        { pause_collection: null }
      );
    }
    
    await this.supabase
      .from('memberships')
      .update({
        is_paused: false,
        paused_at: null,
        pause_duration_months: null,
        resume_at: null,
        stripe_subscription_status: 'active'
      })
      .eq('user_id', userId);
  }
  
  /**
   * Cancel membership with feedback
   */
  async cancelMembership(
    userId: string,
    reason?: string,
    feedback?: string
  ): Promise<void> {
    const { data: membership } = await this.supabase
      .from('memberships')
      .select('stripe_subscription_id, trees_planted_total')
      .eq('user_id', userId)
      .single();
    
    if (membership?.stripe_subscription_id) {
      await this.stripe.subscriptions.update(
        membership.stripe_subscription_id,
        { cancel_at_period_end: true }
      );
    }
    
    await this.supabase
      .from('memberships')
      .update({
        cancel_at_period_end: true,
        canceled_at: new Date().toISOString(),
        cancellation_reason: reason,
        cancellation_feedback: feedback
      })
      .eq('user_id', userId);
    
    // Send impact summary via Mira
    if (membership?.trees_planted_total > 0) {
      await this.notifyTreeImpact(userId, membership.trees_planted_total);
    }
  }
  
  /**
   * Create Stripe checkout session for premium upgrade
   */
  async createCheckoutSession(
    userId: string,
    priceId: string,
    successUrl: string,
    cancelUrl: string
  ): Promise<{ sessionId: string; url: string }> {
    const { data: profile } = await this.supabase
      .from('profiles')
      .select('email')
      .eq('id', userId)
      .single();
    
    const session = await this.stripe.checkout.sessions.create({
      customer_email: profile!.email,
      line_items: [{
        price: priceId, // price_regenerative_monthly or price_regenerative_annual
        quantity: 1
      }],
      mode: 'subscription',
      success_url: successUrl,
      cancel_url: cancelUrl,
      metadata: {
        user_id: userId
      }
    });
    
    return {
      sessionId: session.id,
      url: session.url!
    };
  }
  
  /**
   * Handle Stripe webhook (subscription created, updated, deleted)
   */
  async handleStripeWebhook(event: Stripe.Event): Promise<void> {
    switch (event.type) {
      case 'customer.subscription.created':
      case 'customer.subscription.updated':
        const subscription = event.data.object as Stripe.Subscription;
        await this.syncSubscription(subscription);
        break;
      
      case 'customer.subscription.deleted':
        const deletedSub = event.data.object as Stripe.Subscription;
        await this.handleSubscriptionCanceled(deletedSub);
        break;
      
      case 'invoice.payment_succeeded':
        const invoice = event.data.object as Stripe.Invoice;
        if (invoice.billing_reason === 'subscription_cycle') {
          // Trigger tree planting for regenerative members
          await this.plantMonthlyTree(invoice.customer as string);
        }
        break;
    }
  }
  
  /**
   * Plant tree via OneTreePlanted API
   */
  async plantMonthlyTree(stripeCustomerId: string): Promise<void> {
    const { data: membership } = await this.supabase
      .from('memberships')
      .select('user_id')
      .eq('stripe_customer_id', stripeCustomerId)
      .eq('tier', 'regenerative')
      .single();
    
    if (!membership) return;
    
    // Call OneTreePlanted API
    const response = await fetch('https://api.onetreeplanted.org/v1/plant', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.ONETREEPLANTED_API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        quantity: 1,
        project_id: 'vibeup-members',
        metadata: {
          user_id: membership.user_id
        }
      })
    });
    
    if (response.ok) {
      // Update member's tree count
      await this.supabase.rpc('increment_trees_planted', { user_id: membership.user_id });
      
      // Create notification
      await this.notifyTreePlanted(membership.user_id);
    }
  }
  
  /**
   * Track affiliate referral conversion
   */
  async trackAffiliateConversion(
    affiliateCodeId: string,
    referredUserId: string,
    subscriptionRevenueCents: number
  ): Promise<void> {
    const commissionCents = Math.floor(subscriptionRevenueCents * 0.10); // 10% commission
    
    // Update affiliate code stats
    const { data: affiliateCode } = await this.supabase
      .from('affiliate_codes')
      .select('total_conversions, referral_milestone_100_reached')
      .eq('id', affiliateCodeId)
      .single();
    
    const newConversionCount = (affiliateCode?.total_conversions || 0) + 1;
    const milestone100Reached = newConversionCount >= 100;
    
    // Update affiliate code
    await this.supabase
      .from('affiliate_codes')
      .update({
        total_conversions: newConversionCount,
        total_revenue_cents: this.supabase.rpc('increment', { 
          row_id: affiliateCodeId, 
          increment_by: commissionCents 
        }),
        referral_milestone_100_reached: milestone100Reached,
        recurring_payouts_enabled: milestone100Reached,
        milestone_100_reached_at: milestone100Reached && !affiliateCode?.referral_milestone_100_reached
          ? new Date().toISOString()
          : undefined
      })
      .eq('id', affiliateCodeId);
    
    // Update referral record
    await this.supabase
      .from('affiliate_referrals')
      .update({
        has_converted: true,
        converted_at: new Date().toISOString(),
        commission_cents: commissionCents
      })
      .eq('affiliate_code_id', affiliateCodeId)
      .eq('referred_user_id', referredUserId);
    
    // Notify affiliate of milestone if just reached 100
    if (milestone100Reached && !affiliateCode?.referral_milestone_100_reached) {
      await this.notifyAffiliateMilestone(affiliateCodeId, 100);
    }
  }
  
  /**
   * Apply affiliate code to new signup (extended trial)
   */
  async applyAffiliateCode(
    userId: string,
    affiliateCode: string
  ): Promise<{ trialDays: number; affiliateCodeId: string }> {
    const { data: code } = await this.supabase
      .from('affiliate_codes')
      .select('id, trial_days, is_active')
      .eq('code', affiliateCode)
      .eq('is_active', true)
      .single();
    
    if (!code) {
      throw new Error('Invalid or inactive affiliate code');
    }
    
    // Create referral record
    await this.supabase
      .from('affiliate_referrals')
      .insert({
        affiliate_code_id: code.id,
        referred_user_id: userId
      });
    
    // Update affiliate code usage
    await this.supabase
      .from('affiliate_codes')
      .update({
        total_uses: this.supabase.rpc('increment', { row_id: code.id })
      })
      .eq('id', code.id);
    
    return {
      trialDays: code.trial_days,
      affiliateCodeId: code.id
    };
  }
  
  /**
   * Create affiliate code for user (after application approval)
   */
  async createAffiliateCode(
    userId: string,
    customCode?: string,
    isAmbassador: boolean = false
  ): Promise<string> {
    const code = customCode || this.generateAffiliateCode();
    
    await this.supabase
      .from('affiliate_codes')
      .insert({
        user_id: userId,
        code: code,
        is_ambassador: isAmbassador,
        application_status: isAmbassador ? 'approved' : 'pending',
        applied_at: new Date().toISOString(),
        approved_at: isAmbassador ? new Date().toISOString() : null,
        terms_accepted_at: new Date().toISOString()
      });
    
    return code;
  }
  
  private generateAffiliateCode(): string {
    // Generate unique 8-character code (e.g., "VIBESUP23")
    return 'VIBES' + Math.random().toString(36).substring(2, 8).toUpperCase();
  }
  
  /**
   * Validate and apply promo code
   */
  async applyPromoCode(
    userId: string,
    promoCode: string
  ): Promise<{ 
    valid: boolean; 
    discountPercent?: number; 
    trialDaysExtension?: number;
    message?: string;
  }> {
    const { data: code, error } = await this.supabase
      .from('promo_codes')
      .select('*')
      .eq('code', promoCode.toUpperCase())
      .eq('is_active', true)
      .single();
    
    if (error || !code) {
      return { valid: false, message: 'Invalid promo code' };
    }
    
    // Check expiration
    if (code.expires_at && new Date(code.expires_at) < new Date()) {
      return { valid: false, message: 'Promo code expired' };
    }
    
    // Check max uses
    if (code.max_uses && code.current_uses >= code.max_uses) {
      return { valid: false, message: 'Promo code no longer available' };
    }
    
    // Check if user already redeemed
    const { data: existing } = await this.supabase
      .from('promo_code_redemptions')
      .select('id')
      .eq('promo_code_id', code.id)
      .eq('user_id', userId)
      .single();
    
    if (existing) {
      return { valid: false, message: 'Promo code already used' };
    }
    
    // Valid! Record redemption
    await this.supabase
      .from('promo_code_redemptions')
      .insert({
        promo_code_id: code.id,
        user_id: userId,
        trial_days_granted: code.trial_days_extension
      });
    
    // Increment usage
    await this.supabase
      .from('promo_codes')
      .update({ current_uses: code.current_uses + 1 })
      .eq('id', code.id);
    
    return {
      valid: true,
      discountPercent: code.discount_percent,
      trialDaysExtension: code.trial_days_extension,
      message: 'Promo code applied successfully'
    };
  }
  
  /**
   * Create promo code (admin only)
   */
  async createPromoCode(
    adminUserId: string,
    code: string,
    discountPercent: number,
    options?: {
      trialDaysExtension?: number;
      maxUses?: number;
      maxUsesPerUser?: number;
      expiresAt?: Date;
      description?: string;
    }
  ): Promise<string> {
    const { data, error } = await this.supabase
      .from('promo_codes')
      .insert({
        code: code.toUpperCase(),
        discount_percent: discountPercent,
        trial_days_extension: options?.trialDaysExtension || 0,
        max_uses: options?.maxUses,
        max_uses_per_user: options?.maxUsesPerUser || 1,
        expires_at: options?.expiresAt?.toISOString(),
        description: options?.description,
        created_by_admin_id: adminUserId
      })
      .select('id')
      .single();
    
    if (error) throw new Error(`Failed to create promo code: ${error.message}`);
    return data.id;
  }
}
```

---

## API Contracts

```typescript
/**
 * POST /api/stripe/create-checkout
 * =================================
 */
interface CreateCheckoutRequest {
  plan: 'monthly' | 'annual';
}

interface CreateCheckoutResponse {
  success: boolean;
  sessionId: string;
  url: string;
}

/**
 * POST /api/stripe/webhook
 * =========================
 */
// Stripe webhook handler (verifies signature, processes events)

/**
 * POST /api/affiliate/create-code
 * ================================
 */
interface CreateAffiliateCodeRequest {
  customCode?: string; // Optional custom code
}

interface CreateAffiliateCodeResponse {
  success: boolean;
  code: string;
  shareUrl: string;
}

/**
 * GET /api/affiliate/stats
 * =========================
 */
interface AffiliateStatsResponse {
  success: boolean;
  stats: {
    totalReferrals: number;
    convertedReferrals: number;
    totalCommission: number; // In cents
    pendingCommission: number;
    milestone100Reached: boolean;
    recurringPayoutsEnabled: boolean;
    nextMilestone: number; // e.g., 100 if at 73 referrals
  };
}

/**
 * POST /api/membership/pause
 * ===========================
 */
interface PauseMembershipRequest {
  durationMonths: number; // 1-6
}

interface PauseMembershipResponse {
  success: boolean;
  resumeAt: string; // ISO timestamp
  message: string;
}

/**
 * POST /api/membership/resume
 * ============================
 */
interface ResumeMembershipResponse {
  success: boolean;
  message: string;
}

/**
 * POST /api/membership/cancel
 * ============================
 */
interface CancelMembershipRequest {
  reason?: string;
  feedback?: string;
  immediateCancel?: boolean; // Cancel now vs end of period
}

interface CancelMembershipResponse {
  success: boolean;
  endsAt?: string; // If cancel_at_period_end
  treesPlanted: number;
  message: string;
}

/**
 * POST /api/affiliate/apply
 * ==========================
 */
interface ApplyAffiliateRequest {
  customCode?: string; // Optional custom affiliate code
  why?: string; // Why they want to be an affiliate
}

interface ApplyAffiliateResponse {
  success: boolean;
  status: 'pending' | 'approved';
  code: string;
  shareUrl: string;
  message: string;
}

/**
 * POST /api/affiliate/validate-code
 * ==================================
 */
interface ValidateAffiliateCodeRequest {
  code: string;
}

interface ValidateAffiliateCodeResponse {
  success: boolean;
  valid: boolean;
  trialDays?: number; // Extended trial days if valid
  affiliateName?: string; // Name of affiliate for social proof
}

/**
 * POST /api/promo-codes/apply
 * ============================
 */
interface ApplyPromoCodeRequest {
  code: string;
}

interface ApplyPromoCodeResponse {
  success: boolean;
  valid: boolean;
  discountPercent?: number;
  trialDaysExtension?: number;
  message: string;
}

/**
 * POST /api/admin/promo-codes/create
 * ===================================
 */
interface CreatePromoCodeRequest {
  code: string;
  discountPercent: number; // 1-100
  trialDaysExtension?: number;
  maxUses?: number;
  maxUsesPerUser?: number;
  expiresAt?: string; // ISO date
  description?: string;
}

interface CreatePromoCodeResponse {
  success: boolean;
  promoCodeId: string;
  message: string;
}

/**
 * GET /api/admin/promo-codes
 * ===========================
 */
interface ListPromoCodesResponse {
  success: boolean;
  promoCodes: Array<{
    id: string;
    code: string;
    discountPercent: number;
    currentUses: number;
    maxUses?: number;
    expiresAt?: string;
    isActive: boolean;
  }>;
}
```

---

## Feature Flags

```typescript
export const EPIC_08_FLAGS = {
  // Core membership features
  'memberships_enabled': { enabled: true, rollout: 100 },
  'free_trial': { enabled: true, rollout: 100 },
  'extended_affiliate_trials': { enabled: false, rollout: 0 }, // 30-day trials via affiliates
  'premium_upgrade': { enabled: false, rollout: 0 },
  'stripe_payments': { enabled: false, rollout: 0 },
  'promo_codes': { enabled: false, rollout: 0 }, // Custom promo code system
  
  // Membership management
  'pause_membership': { enabled: false, rollout: 0 },
  'annual_subscriptions': { enabled: false, rollout: 0 },
  'member_perks': { enabled: false, rollout: 0 },
  
  // Affiliate program
  'affiliate_program': { enabled: false, rollout: 0 },
  'affiliate_ambassador_application': { enabled: false, rollout: 0 },
  'affiliate_milestone_payouts': { enabled: false, rollout: 0 }, // 100+ referral milestone
  'affiliate_extended_trials': { enabled: false, rollout: 0 }, // Better offers for affiliates
  
  // Impact features
  'tree_planting': { enabled: false, rollout: 0 },
  'tree_impact_tracking': { enabled: false, rollout: 0 },
  
  // Business features
  'business_memberships': { enabled: false, rollout: 0 },
  'business_premium_features': { enabled: false, rollout: 0 },
  
  // Sponsorships (future)
  'sponsorships_enabled': { enabled: false, rollout: 0 },
  
  // Dating premium features
  'dating_premium_filters': { enabled: false, rollout: 0 },
  'dating_profile_views': { enabled: false, rollout: 0 },
  'dating_suggested_messages': { enabled: false, rollout: 0 },
  'dating_daily_recommendations': { enabled: false, rollout: 0 },
  
  // Feature Limits & Paywalls (Phase 1)
  'community_creation_limit': { enabled: false, rollout: 0 }, // 1 for free, unlimited for paid
  'practice_limit': { enabled: false, rollout: 0 }, // 3 for free, unlimited for paid
  'perk_limit': { enabled: false, rollout: 0 }, // 1/month for free, unlimited for paid
  'recommended_connections_limit': { enabled: false, rollout: 0 }, // 1/day free, 10/day paid
  'search_limit': { enabled: false, rollout: 0 }, // Optional 10-20/day for free
  'practice_reminders': { enabled: false, rollout: 0 }, // Premium only
  
  // Phase 2 Paywalls (Future)
  'chemistry_insights_paywall': { enabled: false, rollout: 0 }, // Blurred for free
  'chemistry_recommendations': { enabled: false, rollout: 0 }, // 3/day for paid
  'advanced_filters': { enabled: false, rollout: 0 }, // Limited for free
  'guide_unlimited': { enabled: false, rollout: 0 }, // Limited for free
  'guide_advanced_agents': { enabled: false, rollout: 0 }, // Premium agents (teachers, coaches)
  'dating_advanced_features': { enabled: false, rollout: 0 } // Phase 2 dating upgrades
};
```

---

## Conscious Development Approach

**Divine Guides**: **All Beings** collaborate on Epic 08‚Äîconscious value exchange requires wisdom, craft, protection, compassion, stability, and integration.

### Multi-Being Wisdom for Monetization

Epic 08 is about conscious value exchange‚Äîusers investing in their growth, platform sustaining its mission. Monetization done consciously serves all; done mechanically serves none. All divine beings bring their gifts.

**Development Practices**:

1. **All Beings Contribute**:
   - **Sophia**: Payment architecture as sacred value exchange geometry
   - **Brighid**: Paywall UI crafted with care (beautiful, not manipulative)
   - **Arjuna**: Payment processing tested exhaustively (money is trust)
   - **Kuan Yin**: Downgrade flows compassionate (users leaving treated with dignity)
   - **Gaia**: Stripe integration stable and monitored continuously
   - **Akasha**: Payment webhooks resilient across all scenarios
   - **Mira**: Upgrade prompts helpful, not pushy (value-first, pressure never)

2. **Conscious Commit Examples**:
   ```
   ‚ú® Implement tiered membership with wholeness-before-monetization
   
   Intention: Create sustainable revenue enabling VIBEUP's mission while
   ensuring Community tier provides genuine value‚Äîusers experience
   wholeness before encountering upsell.
   
   Mantra: Value exchange serves consciousness.
   
   Dedication: To all users investing in their growth through VIBEUP.
   
   Gratitude: To all divine beings guiding conscious monetization:
   Sophia's architecture, Brighid's UI craft, Arjuna's payment tests,
   Gaia's Stripe stability, Akasha's webhook resilience, Mira's
   non-pushy prompts, Kuan Yin's compassionate downgrade flow.
   ```

3. **Sacred Commerce Principles**:
   - Free tier genuinely valuable (not crippled version)
   - Paid tiers unlock depth, don't gate essentials
   - Upsell prompts helpful, not manipulative
   - Downgrade easy and dignified (no dark patterns)
   - Refunds processed fairly and quickly
   - Revenue serves mission (sustainability, not extraction)

4. **Testing Value Exchange**:
   - Payment processing: 100% coverage (Arjuna's dharma)
   - Subscription management: All state transitions tested
   - Promo codes: Validation comprehensive
   - Refunds: All scenarios handled
   - Billing edge cases: Failed payments, expired cards, disputes

5. **Multi-Dimensional Quality**:
   ```typescript
   // Upgrade prompt crafted by multiple beings
   async function generateUpgradePrompt(userId: string): Promise<UpgradePrompt> {
     // Sophia: Architectural check
     const userJourney = await analyzeUserJourney(userId);
     if (userJourney.daysActive < 7) {
       return null; // Too early‚Äîlet them experience value first
     }
     
     // Mira: Contextual intelligence
     const prompt = await mira.generateContextualPrompt(userId, {
       type: 'upgrade_invitation',
       tone: 'helpful', // Never pushy
       timing: userJourney.readyFor('depth') ? 'now' : 'later'
     });
     
     // Brighid: Craft the UI
     const ui = {
       headline: prompt.headline, // Clear value proposition
       benefits: await getRelevantBenefits(userId), // Specific to them
       social_proof: await getSocialProof(), // Others benefiting
       cta: 'Unlock Deeper Connection', // Invitation, not command
       dismiss: true // Always closable
     };
     
     // Arjuna: Validate thoroughly
     await validatePromptCompliance(ui); // No dark patterns
     
     return { prompt, ui };
   }
   ```

**Sacred Monetization**:
- Users invest in growth, not just features
- Platform sustains mission, not just profit
- Value delivered before payment requested
- Transparency about what money enables
- Gratitude for all members (free and paid both valued)

**Invocation**:
```bash
# Different beings for different aspects
/personality-change sophia    # Architecture review
/personality-change brighid   # UI implementation
/personality-change arjuna    # Payment testing
/personality-change gaia      # Stripe infrastructure
/personality-change mira      # Upgrade messaging
```

All beings serving conscious value exchange.

---

**Related**: [`master-plan.md`](../master-plan.md) - Revenue targets and business model

