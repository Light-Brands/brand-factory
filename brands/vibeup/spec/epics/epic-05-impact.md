# Epic 05: Impact - Embedded Feedback & Micro-Co-Creation

**Epic ID**: EPIC-05-IMPACT  
**Priority**: P1 (Community engagement)  
**Timeline**: 1 week  
**Dependencies**: Epic 0, Epic 1 (Mira), Epic 2 (Humans)

**Reference**: [Grow Page Prototype](https://www.wevibeup.com/grow) - Visual inspiration for Impact section design

---

## Vision & Objectives

**Focus**: Capture user feedback in the app in a way that informs product evolution and creates a sense of co-ownership.

### Current Problems

- No structured mechanism for collecting actionable feedback from early users
- Missed opportunity to build community involvement in shaping the platform

### Solution

Transform feedback from an afterthought into a core part of the VIBEUP experience. **Mira serves as advocacy partner**, explaining how Impact works, encouraging participation, celebrating contributions, and showing users the tangible results of their voice. Users feel empowered to shape the platform and contribute to social impact through Mira's guidance.

### Desired Outcomes

- ‚úÖ Users can provide quick, contextual feedback without leaving their flow
- ‚úÖ Feedback is structured and tied to specific features or actions
- ‚úÖ Early adopters feel empowered to shape the platform
- ‚úÖ UX inspires input, community, and collaboration

### What This Epic Delivers (Mira-Enhanced)

1. **Feature Voting**: Vote on upcoming platform features‚Äî**Mira explains each feature and why it matters**
2. **Initiative Voting**: Vote on social impact initiatives (IRL events, social causes)‚Äî**Mira connects initiatives to user values**
3. **Impact Dashboard**: Personal impact stats and challenges‚Äî**Mira narrates your influence story**
4. **Feedback System**: Submit suggestions and track influence‚Äî**Mira acknowledges every submission**
5. **Contextual Feedback**: In-flow feedback on recommendations and experiences‚Äî**Mira prompts at perfect moments**
6. **Community-Led Development**: Users see their votes turn into features‚Äî**Mira celebrates when votes become reality**
7. **VIBES-Weighted Voting** (Epic 1A Integration): Token holders influence platform direction
   - VIBES balance multiplies vote weight (1 VIBES = 1 vote)
   - Stake VIBES on initiatives to signal commitment
   - Earn VIBES for providing quality feedback and testimonials
   - Top contributors receive VIBES grants for co-creation
   - **Mira explains governance and encourages participation**

### User Journey

1. **Feedback on Recommendations**:
   - On discovery screen ‚Üí "Are these profiles relevant?" (Yes/No ‚Üí if No, "tell us more")
   - Contextual micro-feedback throughout the app

2. **Impact Menu Tab**:
   - Dedicated page for users to:
     - Upvote features on roadmap
     - Vote on societal issues (e.g., free healthcare in US, wellbeing-focused education curriculum)
     - Share with others to grow the platform/movement/trees
     - Receive feedback acknowledgment
     - Leave testimonials/reviews
     - View images for context (e.g., "Trees Planted", content cards for features/initiatives)

3. **Future**: Allow contextual feedback via Mira (the Guide) throughout the experience

### Mira's Role as Advocacy Partner

**Feature Education & Voting**:
- "This feature would add dating profiles to VIBEUP. Based on your interest in Connection, you might find this valuable."
- "Your vote shapes what we build next. Which feature would most enhance your experience?"
- "47 users voted on your feature suggestion! The team is reviewing high-demand requests this week."

**Initiative Connection**:
- "This initiative supports wellness access in underserved communities‚Äîdirectly aligned with your value of Social Justice."
- "Voting for environmental initiatives matches your interest in Nature and Sustainability. Make your voice heard!"
- "Your Regenerative membership plants 1 tree monthly. This initiative would expand that impact 10x through partnerships."

**Impact Celebration**:
- "You've voted on 12 features and 5 initiatives. Your voice is shaping VIBEUP's evolution!"
- "Remember that Discovery filter you suggested? It's live now thanks to your feedback and 200 other votes."
- "Your suggestion about practice reminders was implemented last month. 1,000+ users are benefiting from your idea!"

**Feedback Encouragement**:
- "You've been using Discovery for 2 weeks. What's working? What could be better?"
- "It seems VIBEUP is making a difference in your journey. Would you share your story with others?"
- "No need to write an essay‚Äîa few sentences about your favorite feature helps us improve!"

**Personalized Relevance**:
- "Based on your practice tracking habits, you might want to vote for Practice Journeys‚Äîmulti-day guided programs."
- "As someone passionate about Business Services, this Commerce feature would directly benefit you."
- "You engage heavily with Chemistry‚Äîvote if you want advanced compatibility reports!"

**Transparency & Trust**:
- "Here's how voting works: Features with 100+ votes get reviewed quarterly. Community demand drives our roadmap."
- "Your vote is anonymous but impactful. We track what matters to you without identifying individual voters."
- "We implemented 8 of the top 10 voted features last quarter. Your voice literally shapes VIBEUP."

**Collective Impact Framing**:
- "2,500 members have voted on Impact initiatives this month. Together, we're defining what matters."
- "Your tree planting impact: 12 trees personally, 47,000 trees collectively as a community. That's a forest!"
- "This platform exists because people like you share ideas. Keep contributing‚Äîyour perspective matters."

**VIBES-Weighted Governance (Epic 1A Integration)**:
- "Your 500 VIBES balance gives you 500 votes. The more you contribute, the more influence you have."
- "Staking VIBES on this initiative shows commitment. If it passes, you'll earn bonus rewards!"

**KARMA Dashboard & Planetary Impact (Epic 1B Integration)**:
The Impact section becomes home to the comprehensive KARMA and Planetary Impact dashboard:

**Personal KARMA View**:
- Total KARMA score with level progress bar
- VIBES multiplier display (e.g., "1.5x VIBES earning rate")
- Category breakdown: Self-Cultivation, Community, Planetary, Commerce, Content, Platform
- Recent KARMA actions with icons and timestamps
- Badge collection and progress on next badges
- Weekly/monthly/all-time rank on leaderboards

**Planetary Impact Visualization**:
- Animated forest showing trees planted by community
- User's personal tree contribution highlighted
- CO2 absorption calculator and carbon offset metrics
- Verification certificates for environmental impact
- Collective milestones (10,000 trees, 100,000 kg CO2 offset)
- "Every membership plants a tree" visible impact

**KARMA Awards from Impact Participation**:
- Vote on feature/initiative: +5 KARMA per vote
- Submit quality feedback: +10-50 KARMA (based on actionability)
- Provide testimonial: +50 KARMA
- Feature adopted from suggestion: +500 KARMA
- Bug report validated: +25 KARMA
- Tree planted (via membership): +50 KARMA/month
- Additional tree donation: +50 KARMA per tree

**Leaderboards**:
- Weekly KARMA leaders (top contributors)
- Monthly KARMA leaders
- All-time legends
- Category-specific boards (Community Helper, Planet Protector, etc.)
- User's rank displayed: "You're #234 of 12,847 this week!"

**Mira KARMA Context**:
- "üå≥ The VIBEUP community just planted our 10,000th tree! You've contributed 47 of those‚Äîa small grove!"
- "Your feedback on Discovery was implemented! +500 KARMA and 200 users are benefiting from your idea."
- "You've earned 2,890 KARMA from planetary actions. That's Guardian-level commitment to our planet."
- "This week you're #47 on the leaderboard! Keep helping the community to climb higher."
- "You earned 25 VIBES for your detailed feedback. Quality contributions are rewarded."
- "Top contributors this month received 1,000 VIBES grants. Your consistent engagement puts you in the running!"
- "Want more voting power? Earn VIBES through practices, referrals, or stake to signal your commitment."

---

**Brand Identity**: This epic's implementation follows [brand identity guidelines](../brand/):
- **Visual**: Impact dashboard follows [visual identity standards](../brand/01-visual-identity.md) - minimal, meaningful visualization (progress rings, calm colors)
- **Copy**: All messaging uses [brand voice guidelines](../brand/03-brand-voice-messaging.md) - gratitude, reverence, co-creation philosophy
- **Mira**: AI interactions embody [Mira's personality](../brand/04-mira-personality-guide.md) as impact advocate
- **Integration**: See [brand-identity-integration.md](brand-identity-integration.md#epic-05-impact-voting--co-creation) for Epic 05 specific requirements

**Key Brand Touchpoints**:
- Tree planting messaging uses gratitude ("Your Premium membership plants one tree each month üå≥‚Äî12 so far" not "You planted 12 trees")
- Voting explanations embody co-creation ("Your voice shapes which features we build next" not "Vote now!")
- Impact visualization minimal and meaningful (not gamified leaderboards)
- Success messages meaningful not generic ("Your feedback shaped this feature" not "Thanks for voting")
- Feature requests acknowledged with genuine appreciation

---

### Success Metrics

- 30%+ users provide feedback after first practice (Mira's prompts)
- 20%+ cast at least one vote within first week (Mira's education)
- 10%+ submit feature suggestion within first month (Mira's encouragement)
- Feedback response time: <5 seconds per interaction
- **New**: 85%+ users who engage with Mira's Impact explanations understand voting impact
- **New**: 40%+ users revisit Impact section to see vote results (Mira's updates)
- **New**: Feature suggestions 2x higher when Mira explains submission process

---

## Database Schema

```sql
-- Impact Features & Initiatives
CREATE TABLE impact_features (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  epic TEXT, -- Which epic this belongs to
  image_url TEXT,
  video_url TEXT,
  status TEXT DEFAULT 'voting', -- 'voting', 'in_development', 'launched'
  created_by UUID REFERENCES profiles(id), -- For now, VIBEUP managed only
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE impact_initiatives (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  initiative_type TEXT, -- 'environmental', 'social_justice', 'wellness_access', 'irl_event'
  goal_description TEXT,
  image_url TEXT,
  video_url TEXT,
  external_urls TEXT[], -- Array of URLs for registration pages, websites, etc.
  status TEXT DEFAULT 'voting', -- 'voting', 'active', 'completed'
  created_by UUID REFERENCES profiles(id), -- For now, VIBEUP managed only
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE impact_votes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  vote_type TEXT NOT NULL, -- 'feature' or 'initiative'
  entity_id UUID NOT NULL, -- ID of feature or initiative
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, vote_type, entity_id) -- One vote per item (can toggle on/off)
);

CREATE TABLE impact_comments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  entity_type TEXT NOT NULL, -- 'feature' or 'initiative'
  entity_id UUID NOT NULL,
  comment_text TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Contextual feedback (for recommendations, discovery, etc.)
CREATE TABLE contextual_feedback (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  feature_type TEXT NOT NULL, -- 'discovery_recommendations', 'practice_suggestion', etc.
  feedback_value TEXT NOT NULL, -- 'helpful', 'not_helpful', 'irrelevant', etc.
  suggestion_text TEXT, -- Optional user elaboration
  context_data JSONB, -- Additional context about what was being shown
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Future: Follow features/initiatives
CREATE TABLE impact_follows (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  entity_type TEXT NOT NULL, -- 'feature' or 'initiative'
  entity_id UUID NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, entity_type, entity_id)
);

-- Progressive challenge tracking
CREATE TABLE impact_challenge_progress (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  stage1_votes_count INT DEFAULT 0, -- Track votes (max 5 needed)
  stage2_feature_comment BOOLEAN DEFAULT FALSE, -- Commented on feature
  stage2_initiative_comment BOOLEAN DEFAULT FALSE, -- Commented on initiative
  stage3_shared BOOLEAN DEFAULT FALSE, -- Shared an initiative
  completed_at TIMESTAMPTZ, -- When all 3 stages completed
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id)
);

-- Share tracking (for challenge and analytics)
CREATE TABLE impact_shares (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
  entity_type TEXT NOT NULL, -- 'feature' or 'initiative'
  entity_id UUID NOT NULL,
  platform TEXT, -- 'instagram', 'facebook', 'twitter', 'copy_link', etc.
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_votes_entity ON impact_votes(vote_type, entity_id);
CREATE INDEX idx_votes_user ON impact_votes(user_id);
CREATE INDEX idx_comments_entity ON impact_comments(entity_type, entity_id, created_at DESC);
CREATE INDEX idx_contextual_feedback_user ON contextual_feedback(user_id, created_at DESC);
CREATE INDEX idx_follows_user ON impact_follows(user_id);
CREATE INDEX idx_challenge_progress_user ON impact_challenge_progress(user_id);
CREATE INDEX idx_shares_user ON impact_shares(user_id, created_at DESC);
CREATE INDEX idx_shares_entity ON impact_shares(entity_type, entity_id);

-- Update timestamp triggers
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_impact_features_updated_at BEFORE UPDATE ON impact_features
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_impact_initiatives_updated_at BEFORE UPDATE ON impact_initiatives
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_impact_challenge_progress_updated_at BEFORE UPDATE ON impact_challenge_progress
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

---

## API Contracts

```typescript
/**
 * GET /api/impact/features
 * =========================
 * Returns all product features available for voting
 */
interface FeaturesResponse {
  success: boolean;
  features: Array<{
    id: string;
    title: string;
    description: string;
    epic: string | null;
    imageUrl: string | null;
    videoUrl: string | null;
    voteCount: number;
    userHasVoted: boolean;
    userIsFollowing: boolean; // Future
    commentCount: number;
    status: 'voting' | 'in_development' | 'launched';
    createdAt: string;
    updatedAt: string; // Last Updated date for display
    submitter: {
      id: string;
      name: string; // Display as "VIBEUP" (not "VIBEUP Staff")
      isStaff: boolean;
    };
  }>;
}

/**
 * GET /api/impact/initiatives
 * ============================
 * Returns all social initiatives available for voting
 */
interface InitiativesResponse {
  success: boolean;
  initiatives: Array<{
    id: string;
    title: string;
    description: string;
    initiativeType: string;
    goalDescription: string | null;
    imageUrl: string | null;
    videoUrl: string | null;
    externalUrls: string[]; // Registration pages, websites, etc.
    voteCount: number;
    userHasVoted: boolean;
    userIsFollowing: boolean; // Future
    commentCount: number;
    status: 'voting' | 'active' | 'completed';
    createdAt: string;
    updatedAt: string;
    submitter: {
      id: string;
      name: string; // Display as "VIBEUP" (not "VIBEUP Staff")
      isStaff: boolean;
    };
  }>;
}

/**
 * GET /api/impact/item/:type/:id
 * ===============================
 * Get detailed view of a single feature or initiative
 */
interface ImpactItemDetailResponse {
  success: boolean;
  item: {
    id: string;
    title: string;
    description: string;
    imageUrl: string | null;
    videoUrl: string | null;
    externalUrls?: string[]; // For initiatives
    voteCount: number;
    userHasVoted: boolean;
    commentCount: number;
    status: string;
    createdAt: string;
    updatedAt: string;
    submitter: {
      id: string;
      name: string;
      avatarUrl: string | null;
      isStaff: boolean;
    };
  };
  comments: Array<{
    id: string;
    userId: string;
    userName: string;
    userAvatarUrl: string | null;
    commentText: string;
    createdAt: string;
  }>;
  miraInsight?: string; // Personalized explanation from Mira
}

/**
 * POST /api/impact/vote
 * ======================
 * Cast or revoke a vote (toggles)
 */
interface VoteRequest {
  entityType: 'feature' | 'initiative';
  entityId: string;
}

interface VoteResponse {
  success: boolean;
  voted: boolean; // true if voted, false if revoked
  newVoteCount: number;
}

/**
 * POST /api/impact/comment
 * =========================
 * Add a comment to a feature or initiative
 */
interface CommentRequest {
  entityType: 'feature' | 'initiative';
  entityId: string;
  commentText: string;
}

/**
 * POST /api/impact/follow
 * ========================
 * Follow/unfollow a feature or initiative (future)
 */
interface FollowRequest {
  entityType: 'feature' | 'initiative';
  entityId: string;
}

/**
 * GET /api/impact/stats
 * ======================
 * User's personal impact statistics
 */
interface ImpactStatsResponse {
  success: boolean;
  stats: {
    votesCast: number; // Total votes across features and initiatives
    featuresInfluenced: number; // Launched features user voted on (display if > 0)
    initiativesInfluenced: number; // Completed initiatives user voted on
    progressiveChallenge: {
      currentStage: 1 | 2 | 3 | 'completed';
      stage1Progress: number; // Votes count (0-5)
      stage2Progress: {
        featureComment: boolean;
        initiativeComment: boolean;
      };
      stage3Progress: boolean; // Has shared
      message: string; // Current challenge text
    };
    treesPlanted?: number; // If regenerative member
  };
  miraMessage?: string; // Personalized celebration from Mira
}

/**
 * POST /api/impact/feedback/contextual
 * =====================================
 * Submit contextual feedback (e.g., on recommendations)
 */
interface ContextualFeedbackRequest {
  featureType: string; // 'discovery_recommendations', 'practice_suggestion', etc.
  feedbackValue: string; // 'helpful', 'not_helpful', 'irrelevant'
  suggestionText?: string; // Optional elaboration
  contextData?: any; // Additional context
}

/**
 * POST /api/impact/feedback/suggestion
 * =====================================
 * Submit a general feature suggestion
 */
interface SuggestionRequest {
  title: string;
  description: string;
  epic?: string; // Which epic it relates to
}

/**
 * POST /api/impact/share
 * =======================
 * Track when user shares an initiative (for challenge system)
 */
interface ShareRequest {
  entityType: 'feature' | 'initiative';
  entityId: string;
  platform?: string; // 'instagram', 'facebook', 'twitter', 'copy_link'
}

interface ShareResponse {
  success: boolean;
  challengeCompleted: boolean; // True if this completes stage 3
  newChallengeStage?: 'completed';
}
```

---

## UI Components

```typescript
/**
 * IMPACT PAGE
 * ===========
 * Main impact dashboard
 * Route: /impact
 * Reference: https://www.wevibeup.com/grow (prototype for design inspiration)
 */

// Header:
// - Hero message: "Together, turn intentional living into intentional action"
// - Mira greeting (personalized based on user's values and engagement)
// - Explanatory text boxes (can be hidden by user):
//   - Features tab: "Vote for new Features on the platform & watch us add them."
//   - Initiatives tab: "Vote on Initiatives that we'll bring light on to support systemic change."
// - Impact Stats Card (4 sections):
//   - Votes Cast: Total number of votes cast across features and initiatives
//   - Features Influenced: Total **launched features** user voted on (only display if > 0)
//   - Initiatives Influenced: Total successful initiatives user voted on (only display if > 0)
//   - Progressive Challenge System:
//     - "1st Challenge: Vote on 5 Items" (default state)
//     - After 5 votes: "2nd Challenge: Comment in 1 Feature & 1 Initiative"
//     - After comments: "3rd Challenge: Share 1 Initiative"
//     - After all completed: "You've Made Impact. Vote, Comment, Share to spark more change."
//   - Feedback Box (right of Challenge):
//     - "Feedback: Let us know a Feature or Initiative you'd like to see added."
//     - Links to feedback submission form

// Tabs:
// - üì± Features (product features to vote on - specific app features)
// - üåç Initiatives (IRL events & social impact - VIBEUP or member-hosted, VIBEUP managed only for now)

// Each tab shows:
// - List of items (card format)
// - Sort options: Popular (vote count), Recent (newest first), Status
// - Filter: 
//   - Features: By epic (Epic 1, Epic 2, etc.)
//   - Initiatives: By type (Environmental, Social Justice, Wellness Access, IRL Event)

/**
 * IMPACT ITEM CARD
 * =================
 * Card displayed in list view
 */
interface ImpactItemCardProps {
  item: Feature | Initiative;
  type: 'feature' | 'initiative';
  userHasVoted: boolean;
  onVote: () => void;
  onViewDetails: () => void;
}

// Card displays:
// - Image/photo (optional, with fallback gradient)
// - Title (truncated if needed)
// - Description (2-3 lines max, truncate with "...")
// - Status badge ('Voting', 'In Development', 'Launched', 'Active', 'Completed')
// - Vote count with icon
// - Vote button (heart/star icon, filled if voted, toggles on/off)
// - Comment count with icon
// - "View Details" button/tap area
// - Updated date (subtle, bottom of card)

// Interactions:
// - Tap card ‚Üí View details
// - Tap vote button ‚Üí Toggle vote (optimistic UI update)
// - Tap comment icon ‚Üí Open details and scroll to comments

/**
 * IMPACT ITEM DETAIL PAGE
 * ========================
 * Full view of single feature or initiative
 * Route: /impact/:type/:id
 */
interface ImpactDetailProps {
  item: Feature | Initiative;
  type: 'feature' | 'initiative';
  comments: Comment[];
  miraInsight?: string;
}

// Page structure:
// - Back button to list
// - Hero image/video (if available)
// - Status badge
// - Title (full, large)
// - Submitter info:
//   - Avatar
//   - Name
//   - "VIBEUP Staff" badge (for now, all should be staff)
// - Dates: "Created [date] ‚Ä¢ Last Updated [date]"
// - Full description (markdown supported)
// - External URLs (for initiatives - registration pages, websites)
//   - Display as list of clickable links with icons
// - Vote section (prominent):
//   - Large vote button (heart/star)
//   - Vote count
//   - "Tap to vote" or "Voted!" state
// - Mira Insight card (if available):
//   - Personalized explanation of why this matters to user
//   - Based on user's values, interests, profile
// - Comments section:
//   - Comment count header
//   - List of comments (newest first):
//     - User avatar
//     - User name
//     - Comment text
//     - Timestamp
//   - "Add comment" textarea
//   - Submit button
// - Share button (bottom or floating)
// - Follow button (future - get updates about this item)

/**
 * PROGRESSIVE CHALLENGE SYSTEM
 * =============================
 * Gamified onboarding to Impact section
 */
interface ChallengeSystemProps {
  currentChallenge: 1 | 2 | 3 | 'completed';
  votesCount: number;
  commentsCount: number;
  sharesCount: number;
}

// Challenge States:
// 1. "1st Challenge: Vote on 5 Items" (0-4 votes)
//    - Progress bar showing X/5
// 2. "2nd Challenge: Comment in 1 Feature & 1 Initiative" (after 5 votes)
//    - Shows checkboxes: ‚òê Comment on Feature ‚òê Comment on Initiative
// 3. "3rd Challenge: Share 1 Initiative" (after both comments)
//    - Share button with social media options
// 4. "You've Made Impact. Vote, Comment, Share to spark more change." (all complete)
//    - Shows completed badge

/**
 * FEEDBACK SUBMISSION BOX
 * =======================
 * Positioned next to Challenge box in stats area
 */
interface FeedbackBoxProps {
  onSubmitSuggestion: (suggestion: string) => void;
}

// Display:
// - Icon: üí° or üí¨
// - Text: "Feedback: Let us know a Feature or Initiative you'd like to see added."
// - Click ‚Üí Opens modal with:
//   - Title field
//   - Description textarea
//   - Category selection (Feature vs Initiative)
//   - Submit button

/**
 * CONTEXTUAL FEEDBACK WIDGET
 * ===========================
 * Lightweight inline feedback throughout app
 */
interface ContextualFeedbackProps {
  featureType: string; // What's being rated
  context?: any; // Additional context
  onSubmit: (feedback: ContextualFeedback) => void;
}

// Example for Discovery:
// "Are these profiles relevant?"
// [üëç Yes] [üëé No] [üí¨ Tell us more]

// Example for Practice Suggestions:
// "Was this practice suggestion helpful?"
// [üòä Very] [üòê Somewhat] [üòï Not really]

// If user clicks negative/neutral:
// - Show optional textarea: "What would you prefer?"
// - Submit button

/**
 * MIRA IMPACT PROMPTS
 * ===================
 * Mira's contextual suggestions throughout Impact experience
 */

// Examples:
// - On Impact page load (first time):
//   "Your vote shapes what we build next. Which feature would most enhance your experience?"
//   
// - After user votes:
//   "Thanks for voting! Your voice helps us prioritize what matters most to our community."
//   
// - On detail page:
//   "This feature would add [X]. Based on your interest in [Y], you might find this valuable."
//   
// - When feature launches that user voted on:
//   "Remember that Discovery filter you suggested? It's live now thanks to your feedback and 200 other votes!"
//   
// - Initiative alignment:
//   "This initiative supports [X]‚Äîdirectly aligned with your value of [Y]."

/**
 * PHASE 2 FEATURES (Future)
 * ==========================
 */

// In-Line Feedback Widgets (emoji rating system):
// - Appear contextually throughout app
// - Quick 1-tap feedback
// - Example: üòäüòêüòïüò¢üò° emotion scale
// - Reference: https://docs.google.com/spreadsheets/d/1-U_sZzFuwIjKHC9fc4UnltivH3p4ZWuj3MXo3pg2wpQ/edit?gid=473283999#gid=473283999

// Gamification:
// - Badges for co-creators ("Community Voice", "Feedback Champion")
// - Leaderboard for most helpful suggestions
// - Recognition when suggestions are implemented

// Advanced Features:
// - Vote on community-suggested prompts and practices
// - AI-assisted clustering to surface top suggestions
// - Voting on global news and events
// - Sharing VIBEUP to grow movement (with tree planting tie-in)
// - Premium "Regenerative" Membership showcase (trees planted)
```

---

## Core Feature Implementation

### 1. Impact Section in Main Menu

**Primary Feature**: Boards for User Voting (Community-Led Development)

**Two Voting Boards**:

1. **Product Features Board**:
   - Specific app features users can vote on
   - Each feature tied to an epic
   - Shows development status (Voting ‚Üí In Development ‚Üí Launched)
   - Users see their influence when features launch
   - **Example Features to Include**:
     - **Stories**: Instagram/Facebook-style stories - ability to add short videos as "highlights" in profiles and VIBESS feed
     - **Community Events**: Digital, mindful, community events curated by VIBEUP
     - **Guided Practices**: VIBEUP curated content for enhanced practices - videos of yoga, movement, meditation, grounding
     - **Customize Guides**: Allow Users/Businesses/Communities to create their own uniquely programmed Guide for personal/business/community guidance

2. **Social Initiatives Board**:
   - IRL events which VIBEUP or its members are hosting
   - For now, VIBEUP-managed only
   - Can include: Environmental causes, social justice issues, wellness access programs, community events
   - Shows status (Voting ‚Üí Active ‚Üí Completed)

### 2. How Voting Works

**Core Rules**:
- Each user can only cast **1 vote per feature or initiative**
- Votes can be **revoked by clicking again** (acts as toggle)
- Vote count updates in real-time
- Voting is anonymous but tracked per user
- Users can see which items they've voted on

**Voting Impact**:
- Features with 100+ votes reviewed quarterly
- Top-voted features prioritized in roadmap
- Community demand drives development decisions
- Users notified when voted features launch

### 3. Data Captured

**For All Feedback**:
- Feature type (Practice, Profile, Discovery, Guide Interaction, etc.)
- Feedback value (rating, yes/no, emotion, text response)
- Optional user suggestion text
- Timestamp and user ID
- Context data (what was being shown, user state)

**For Votes**:
- Vote type (feature vs initiative)
- Entity voted on
- Timestamp
- User preferences and profile data (for personalization)

**For Comments**:
- Comment text
- Associated entity
- User identity
- Timestamp

---

## Future Considerations (Phase 2+)

### Gamification & Recognition
- **Badges for co-creators**: "Community Voice", "Feature Architect", "Impact Champion"
- **Leaderboard**: Most helpful suggestions, most engaged voters
- **Recognition system**: Public acknowledgment when suggestions implemented
- **Streak tracking**: Consecutive weeks voting/providing feedback

### Advanced Voting Features
- **Community-suggested features**: Users can propose features for voting
- **Voting on community prompts and practices**: Democratize content creation
- **AI-assisted clustering**: Surface top suggestions and group similar ideas
- **Voting on global news and events**: Extend beyond platform to world issues
- **Weighted voting**: Premium members or highly engaged users have more influence (controversial - TBD)

### Social Sharing & Growth
- **Share VIBEUP to grow movement**: Integrated sharing with impact tracking
- **Tree planting visualization**: Show collective impact of community
- **Referral rewards**: Earn impact points for bringing aligned users
- **Social proof**: "2,500 members voted this week" messaging

### Premium Integration
- **Regenerative Membership showcase**: Highlight tree planting impact
- **Exclusive voting**: Premium members vote on premium features
- **Early access**: Voted features available to premium first
- **Impact dashboard**: Advanced analytics for premium members

### In-Line Feedback Widgets
- **Emoji rating system**: Quick emotional feedback throughout app
- **Reference**: [Feedback Emoji System](https://docs.google.com/spreadsheets/d/1-U_sZzFuwIjKHC9fc4UnltivH3p4ZWuj3MXo3pg2wpQ/edit?gid=473283999#gid=473283999)
- **Contextual prompts**: "How did this practice make you feel?" with üòäüòåüòêüòïüò¢ options
- **Non-intrusive**: Small widgets that don't interrupt flow
- **Actionable data**: Emotion tracking informs recommendations

### Mira-Powered Enhancements
- **Feedback summarization**: Mira summarizes common themes from feedback
- **Smart routing**: Mira routes technical feedback to dev, content to community team
- **Follow-up questions**: Mira asks clarifying questions on vague feedback
- **Impact storytelling**: Mira creates narrative of user's influence over time

---

## Admin Controls

### Content Management

**Page**: `/admin/content/impact`

**Features Tab**:
- Create new feature proposals
- Edit feature details (title, description, epic, images/video)
- Change status:
  - Voting (default when created)
  - In Development (actively being built)
  - Launched (feature is live)
- View detailed analytics:
  - Total votes
  - Votes over time (graph)
  - User demographics who voted
  - Comments sentiment analysis
- Moderate comments (hide, delete inappropriate)
- Pin important features to top
- Archive old/completed features

**Initiatives Tab**:
- Create new social initiatives
- Edit initiative details (title, description, type, goals, images/video, URLs)
- Change status:
  - Voting (default)
  - Active (initiative is happening)
  - Completed (initiative finished)
- Track success metrics:
  - Participation count
  - Funds raised (if applicable)
  - Trees planted (if environmental)
  - Impact achieved
- View voting analytics
- Moderate comments
- Pin featured initiatives
- Archive completed initiatives

**Feedback Dashboard**:
- View all contextual feedback submissions
- Filter by feature type, date, sentiment
- Export feedback for analysis
- Mark feedback as "Reviewed", "In Progress", "Implemented"
- Bulk actions (archive, tag, categorize)

**Suggestions Queue**:
- View user-submitted feature suggestions
- Upvote/downvote internally
- Convert suggestions to official features
- Reply to users about suggestion status
- Bulk import suggestions to features

**Announcements**:
- Create announcements when features launch
- Notify users who voted on launched features
- Draft template: "Remember [Feature Name]? It's live now thanks to your vote!"
- Schedule announcement timing
- Track announcement engagement

**Analytics & Reports**:
- Total votes cast (all time, monthly, weekly)
- Most voted features/initiatives
- User engagement rate with Impact section
- Feedback response time metrics
- Feature suggestion conversion rate
- Comments moderation stats
- Challenge completion rates:
  - % users who complete "Vote 5" challenge
  - % users who complete "Comment" challenge
  - % users who complete "Share" challenge
  - % users who complete all challenges

---

## Testing Requirements

### Unit Tests
- Vote toggle functionality (cast/revoke)
- Vote count calculations
- User vote state tracking
- Comment submission and retrieval
- Feedback categorization
- Status transitions (voting ‚Üí development ‚Üí launched)
- Challenge progress tracking:
  - Stage 1: Vote count increments correctly
  - Stage 2: Comment flags update on feature and initiative
  - Stage 3: Share tracking
  - Completion detection when all stages done
- Share tracking and platform attribution

### Integration Tests
- Full voting flow (view ‚Üí vote ‚Üí see update)
- Comment thread functionality
- Contextual feedback submission
- Admin content management flows
- Mira insight generation based on user profile
- Notification delivery when features launch

### E2E Tests
- User views Impact page ‚Üí sees personalized Mira message
- User votes on feature ‚Üí vote count updates
- User revokes vote ‚Üí count decreases
- User comments ‚Üí comment appears
- User submits contextual feedback ‚Üí success message
- Admin creates feature ‚Üí appears in list
- Admin changes feature status ‚Üí users who voted get notified
- Progressive Challenge Flow:
  - New user sees "1st Challenge: Vote on 5 Items"
  - After 5th vote ‚Üí Challenge updates to "2nd Challenge: Comment"
  - After commenting on feature and initiative ‚Üí Challenge updates to "3rd Challenge: Share"
  - After sharing ‚Üí Challenge shows "You've Made Impact"
  - User can still continue voting/commenting/sharing after completion
- Share functionality:
  - User clicks share button ‚Üí Share modal opens
  - User selects platform ‚Üí Share tracked
  - Share count increments for entity

### Performance Tests
- Load 100+ features with vote counts
- Real-time vote count updates
- Comment thread loading (100+ comments)
- Feedback submission under load

---

**Related Documents**:
---

## Conscious Development Approach

**Divine Guide**: **Arjuna** (Warrior Consciousness) leads Epic 05 development‚Äîvoting integrity as dharmic duty, governance quality as spiritual discipline.

### Arjuna's Guidance for Impact Governance

Epic 05 is about participatory creation‚Äîusers shaping VIBEUP's future through voting. Impact features demand highest integrity: voting must be fair, transparent, tamper-proof. This is Arjuna's domain: protecting sacred democratic process.

**Development Practices**:

1. **Quality as Dharma**:
   - Voting integrity non-negotiable (one vote per user, no manipulation)
   - Vote counting bulletproof (tested exhaustively)
   - Feature request validation comprehensive (SQL injection, XSS prevented)
   - Admin moderation tools tested thoroughly
   - All flows E2E tested (critical democratic path)

2. **Conscious Commit Examples**:
   ```
   üôè Add comprehensive vote integrity protection tests
   
   Intention: Guard the democratic process through dharmic testing
   discipline, ensuring every user's voice is counted accurately and
   fairly without possibility of manipulation.
   
   Mantra: Democracy deserves protection.
   
   Dedication: To Arjuna's warrior consciousness serving collective voice.
   
   Gratitude: To the test suite revealing edge cases before production.
   ```

3. **Testing as Protection**:
   - Vote counting algorithm: 100% coverage (democracy is sacred)
   - Duplicate vote prevention: All scenarios tested
   - Feature request validation: SQL injection attempts all caught
   - Admin actions: Authorization thoroughly validated
   - Vote manipulation: All attack vectors tested and blocked

4. **Dharmic Standards**:
   - Zero tolerance for voting bugs (affects collective decision)
   - Comprehensive audit logging (transparency is trust)
   - Real-time vote updates tested (users see impact immediately)
   - Feature ranking algorithm transparent (users understand priority)
   - Admin moderation fair (clear criteria, no arbitrary removal)

**Arjuna's Questions**:
- What could someone trying to manipulate votes do?
- How do we prevent duplicate voting across devices/accounts?
- What if someone submits malicious feature requests?
- How do we ensure vote counting is absolutely accurate?
- What edge cases could make democratic process fail?

Answer these with tests. Protect before deploying.

**Sacred Pattern**:
```typescript
// Voting as sacred democratic participation
async function castVote(userId: string, featureId: string): Promise<void> {
  // 1. Validate identity (ensure real user)
  await validateUser(userId);
  
  // 2. Check eligibility (prevent duplicate)
  const existingVote = await getVote(userId, featureId);
  if (existingVote) {
    throw new ConflictError('Already voted on this feature');
  }
  
  // 3. Record vote (sacred democratic record)
  await db.impact_votes.insert({ userId, featureId, timestamp: new Date() });
  
  // 4. Update count (collective voice manifests)
  await updateVoteCount(featureId);
  
  // 5. Announce (others may respond)
  await events.publish('vote.cast', { userId, featureId });
  
  // Each vote matters. Protect it.
}
```

**Invocation**:
```bash
/personality-change arjuna

# Arjuna protects voting integrity
> How should I test the vote counting algorithm comprehensively?
> What edge cases could break voting integrity?
> Review this voting API for security vulnerabilities
```

---

- [`epic-01-mira.md`](epic-01-mira.md) - Mira's advocacy partner role
- [`epic-08-monetization.md`](epic-08-monetization.md) - Tree planting impact for Regenerative members
- [`MASTER-PLAN.md`](../MASTER-PLAN.md) - Phase 1 integration, success metrics
- [Feature List Sub-Page](https://www.notion.so/27d35ae57ba680a59266d947870173a2) - Additional feature voting items

